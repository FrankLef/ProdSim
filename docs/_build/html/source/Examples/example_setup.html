

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Example 01 &mdash; ProdSim 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Example 02: Inspect and visualize input data" href="example_inspect_visualize.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> ProdSim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../API/api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Interface_files/interface.html">Interface Files</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Example 01</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#process-description">Process description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-orders">Define orders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-station">Define station</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-factory">Define factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-functions">Define functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspect">Inspect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualize">Visualize</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="example_inspect_visualize.html">Example 02: Inspect and visualize input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_output_data.html">Example 03: Start simulation and create output data</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_data.html">Example 04: Plot output data</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_assembly.html">Example 05: Assembly process</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ProdSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="examples.html">Examples</a> &raquo;</li>
        
      <li>Example 01</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-01">
<span id="id1"></span><h1>Example 01<a class="headerlink" href="#example-01" title="Permalink to this headline">¶</a></h1>
<p>In this example, all steps are run through that should be carried out before each new simulation study. The focus is on
the actual procedure and not so much on the process itself. Therefore, the process functions, sources, sinks and
attributes of the simulation objects are not filled with concrete content. Examples <a class="reference internal" href="example_inspect_visualize.html#id1"><span class="std std-ref">02</span></a>, <a class="reference internal" href="example_output_data.html#id1"><span class="std std-ref">03</span></a> and
<a class="reference internal" href="plot_data.html#id1"><span class="std std-ref">04</span></a> focus on the concrete modeling of process functions and sources.</p>
<hr class="docutils" />
<div class="section" id="process-description">
<h2>Process description<a class="headerlink" href="#process-description" title="Permalink to this headline">¶</a></h2>
<p>Before any simulation study, the production process should first be formally described. For assembly processes, the use
of a product tree is recommended to represent the product structure. The hierarchical relationship of the components to
each other, as well as the individual quantities are displayed. As has been shown with the
<a class="reference internal" href="../Interface_files/function_file.html#process-function"><span class="std std-ref">process functions</span></a>, this simplifies the later access to the workpiece attributes starting from
the process functions. The following figure shows this product tree for an example gear box.</p>
<a class="reference internal image-reference" href="../../_images/product_tree_gearbox.png"><img alt="distribution_normal" class="align-center" src="../../_images/product_tree_gearbox.png" style="width: 50%;" /></a>
<p>In addition, the production process should be represented in the form of a network. All final stores (triangles) of the
product components and all processing and assembly stations (circles) are drawn in. Then, all production processes are
drawn in by directed edges between the stations. In addition, for assembly processes, the edges for the assembly
workpieces from the final stores to the assembly stations are inserted.</p>
<a class="reference internal image-reference" href="../../_images/product_process_gearbox.png"><img alt="distribution_normal" class="align-center" src="../../_images/product_process_gearbox.png" style="width: 90%;" /></a>
<hr class="docutils" />
</div>
<div class="section" id="define-orders">
<span id="id2"></span><h2>Define orders<a class="headerlink" href="#define-orders" title="Permalink to this headline">¶</a></h2>
<p>After describing the production process, the input files are defined. First of all, the orders should be specified in
the json file. For this purpose, an order is created for each element from the product tree. Even if the elements
<em>gearbox</em> and <em>gear_shaft</em> are no physical products, but only namespaces for the union of elementary components, these
are also defined as orders.  In this way, attributes can be assigned to them later.</p>
<p>The following procedure is recommended when defining an order:</p>
<ol class="arabic simple">
<li><p>Set general information (<em>name</em>, <em>priority</em>, <em>storage</em>, <em>source</em>, <em>sink</em>)</p></li>
<li><p>Describe the process of the order (<em>station</em>, <em>function</em>, <em>demand</em>, <em>component</em>)</p></li>
<li><p>Adding custom attributes</p></li>
</ol>
<p>The corresponding orders are shown below. The storage capacity was limited to 10 for each order to avoid overfilling the
computer memory.</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;order&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gearbox&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;station&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;assemble_gb&quot;</span><span class="p">,</span><span class="s2">&quot;quality_check&quot;</span><span class="p">],</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;assemble_gb&quot;</span><span class="p">,</span><span class="s2">&quot;quality_check&quot;</span><span class="p">],</span>
      <span class="nt">&quot;demand&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">],</span>
      <span class="nt">&quot;component&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;housing&quot;</span><span class="p">,</span><span class="s2">&quot;screw&quot;</span><span class="p">,</span><span class="s2">&quot;gear_shaft&quot;</span><span class="p">],[]]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;housing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;screw&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gear_shaft&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;station&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;assemble_gs&quot;</span><span class="p">],</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;assemble_gs&quot;</span><span class="p">],</span>
      <span class="nt">&quot;demand&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">]],</span>
      <span class="nt">&quot;component&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;gear&quot;</span><span class="p">,</span><span class="s2">&quot;shaft&quot;</span><span class="p">]]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gear&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;station&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;heat_treatment&quot;</span><span class="p">],</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;heating&quot;</span><span class="p">],</span>
      <span class="nt">&quot;demand&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;shaft&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;source_2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;station&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lathe&quot;</span><span class="p">],</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;turning&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="define-station">
<span id="id3"></span><h2>Define station<a class="headerlink" href="#define-station" title="Permalink to this headline">¶</a></h2>
<p>Afterwards, the stations can be defined. For this purpose, a station object is created for each station in the
production process. Since stations do not have as many properties as orders, the following procedure is recommended:</p>
<ol class="arabic simple">
<li><p>Set general information (<em>name</em>, <em>storage</em>, <em>capacity</em>, <em>measurement</em>)</p></li>
<li><p>Adding custom attributes</p></li>
</ol>
<p>Here the capacities were also limited in order not to overfill the computer memory. In addition, the station
<em>quality_check</em> is a pure measuring station, where no attributes are changed. Therefore <em>measurement</em> is set to <em>true</em>
for this station.</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;station&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;lathe&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;heat_treatment&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;assemble_gs&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;assemble_gb&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_check&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;measurement&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="define-factory">
<span id="id4"></span><h2>Define factory<a class="headerlink" href="#define-factory" title="Permalink to this headline">¶</a></h2>
<p>Finally, the global attributes and the global functions must be defined. To do this, simply assign all attributes and
all global functions to the <em>Factory</em> object.</p>
<p>As an example, two global attributes and one gloabel function have been defined.</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;factory&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;glob_attr_1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
      <span class="nt">&quot;glob_attr_2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;glob_func_1&quot;</span><span class="p">]</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="define-functions">
<span id="id5"></span><h2>Define functions<a class="headerlink" href="#define-functions" title="Permalink to this headline">¶</a></h2>
<p>After the json file is completely build the python script must be created. In this script all functions (sources, sinks,
process functions, global functions and distributions) that were used before will be defined. As the focus of this
is on the procedure, the process functions are not assigned any content here. Therefore the examples <a class="reference internal" href="example_inspect_visualize.html#id1"><span class="std std-ref">02</span></a>,
<a class="reference internal" href="example_output_data.html#id1"><span class="std std-ref">03</span></a> and <a class="reference internal" href="plot_data.html#id1"><span class="std std-ref">04</span></a> should be viewed.</p>
<hr class="docutils" />
</div>
<div class="section" id="inspect">
<span id="id6"></span><h2>Inspect<a class="headerlink" href="#inspect" title="Permalink to this headline">¶</a></h2>
<p>After both input files are fully defined the method <code class="docutils literal notranslate"><span class="pre">inspect()</span></code> can be called, which identifies errors that do not
terminate the program when reading the data. Before this method can be called, a simulation environment must be created
and the corresponding data must be read in.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">prodsim</span> <span class="kn">import</span> <span class="n">Environment</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="c1"># Create simulation environment</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>

    <span class="c1"># Read in the process data</span>
    <span class="n">env</span><span class="o">.</span><span class="n">read_files</span><span class="p">(</span><span class="s1">&#39;.data/process.json&#39;</span><span class="p">,</span> <span class="s1">&#39;./data/function.py&#39;</span><span class="p">)</span>

    <span class="c1"># Inspect the process data</span>
    <span class="n">env</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
</pre></div>
</div>
<p>In the following, two errors were deliberately introduced in the json file. First, the signature of the process function
<code class="docutils literal notranslate"><span class="pre">turning</span></code> was changed and the global function <code class="docutils literal notranslate"><span class="pre">global_func_1</span></code> did not yield a timeout event. After calling
<code class="docutils literal notranslate"><span class="pre">inspect()</span></code> the output is as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>progress station: [====================] 100%  quality_check
progress order:   [====================] 100%  shaft
factory:          [====================] 100%  factory
WARNINGS-------------------
Traceback (most recent call last):
  File &quot;/Users/user/prodsim/inspector.py&quot;, line 522, in __inspect_order
    warnings.warn(
        prodsim.exception.BadSignature: The signature of a process function should be (env, item, machine,
        factory), but in the function &#39;turning&#39; at least one argument has a different name.

EXCEPTIONS-----------------
Traceback (most recent call last):
  File &quot;/Users/user/prodsim/inspector.py&quot;, line 575, in __inspect_factory
    raise prodsim.exception.InvalidFunction(
        prodsim.exception.InvalidFunction: The function &#39;glob_func_1&#39; from the
        function file is not a generator function. A global function must yield at least one timeout-event.

---------------------------
Number of Warnings:    1
Number of Exceptions:  1
---------------------------
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="visualize">
<span id="id7"></span><h2>Visualize<a class="headerlink" href="#visualize" title="Permalink to this headline">¶</a></h2>
<p>To finally check if the process was defined correctly the method <code class="docutils literal notranslate"><span class="pre">visualize()</span></code> can be called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualize the process data</span>
<span class="n">env</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</pre></div>
</div>
<p>This call leads to the following output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Dash is running on http://127.0.0.1:8050/

 * Serving Flask app &#39;ProdSim_app&#39; (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
</pre></div>
</div>
<p>By clicking on the link, a browser window will open showing the interactive network graph.</p>
<a class="reference internal image-reference" href="../../_images/screenshot_web_app.png"><img alt="distribution_normal" class="align-center" src="../../_images/screenshot_web_app.png" style="width: 90%;" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="example_inspect_visualize.html" class="btn btn-neutral float-right" title="Example 02: Inspect and visualize input data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Tom Fuchs.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>